<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="Content-Security-Policy" content="default-src 'self'; img-src 'self' data:; style-src 'self' 'unsafe-inline'; script-src 'self'; connect-src https://api.cloudflare.com https://ipv4.icanhazip.com; object-src 'none'; base-uri 'self'; frame-ancestors 'none'">
    <meta name="referrer" content="no-referrer">
    <title>Cloudflare DNS Generator</title>
    <link rel="stylesheet" href="styles.css">
</head>
<body class="light-theme">
    <div class="app-container">
        <!-- Header -->
        <header class="app-header">
            <h1>Cloudflare DNS Generator</h1>
            <div class="header-controls">
                <button id="theme-toggle" class="icon-button" title="Toggle Dark Mode">
                    <span class="theme-icon">üåô</span>
                </button>
            </div>
        </header>

        <!-- Main Content -->
        <main class="main-content">
            <!-- Configuration Section -->
            <section class="config-section">
                <h2>Configuration</h2>
                <div class="form-group">
                    <label for="api-token">Cloudflare API Token:</label>
                    <div class="input-with-button">
                        <input type="password" id="api-token" placeholder="Enter your Cloudflare API token" required>
                        <button id="toggle-token-visibility" type="button" class="toggle-btn">üëÅÔ∏è</button>
                    </div>
                    <small class="help-text">Create an API token at <a href="https://dash.cloudflare.com/profile/api-tokens" target="_blank">Cloudflare Dashboard</a></small>
                </div>
                <div class="form-group">
                    <label for="domain">Domain:</label>
                    <input type="text" id="domain" placeholder="example.com" required>
                    <small class="help-text">The domain managed by your Cloudflare account</small>
                </div>
                <button id="validate-config" class="primary-button">Validate Configuration</button>
                <div id="validation-status" class="status-message"></div>
            </section>

            <!-- DNS Records Section -->
            <section class="records-section">
                <div class="section-header">
                    <h2>DNS Records</h2>
                    <button id="add-record" class="primary-button" disabled>Add Record</button>
                </div>
                <div id="records-container" class="records-container">
                    <div class="empty-state">
                        <p>Validate your configuration first, then add DNS records to generate scripts for.</p>
                    </div>
                </div>
                <div class="records-info">
                    <span id="record-count">0</span> / 20 records
                </div>
            </section>

            <!-- Generate Section -->
            <section class="generate-section">
                <button id="generate-script" class="primary-button large-button" disabled>Generate Script</button>
            </section>
        </main>

        <!-- Script Preview Modal -->
        <div id="preview-modal" class="modal hidden">
            <div class="modal-content">
                <div class="modal-header">
                    <h2>Script Preview</h2>
                    <div class="modal-controls">
                        <select id="script-format">
                            <option value="sh">Bash Script (.sh)</option>
                            <option value="bat">Batch File (.bat)</option>
                            <option value="ps1">PowerShell (.ps1)</option>
                        </select>
                        <button id="close-preview" class="icon-button">‚úï</button>
                    </div>
                </div>
                <div class="modal-body">
                    <pre id="script-content" class="script-preview"></pre>
                </div>
                <div class="modal-footer">
                    <button id="copy-script" class="secondary-button">Copy to Clipboard</button>
                    <button id="save-script" class="primary-button">Save Script</button>
                </div>
            </div>
        </div>

        <!-- Loading Overlay -->
        <div id="loading-overlay" class="loading-overlay hidden">
            <div class="loading-spinner"></div>
            <p id="loading-text">Processing...</p>
        </div>
    </div>

    <!-- Record Template (hidden) -->
    <template id="record-template">
        <div class="record-item">
            <div class="record-header">
                <span class="record-number"></span>
                <button class="remove-record" type="button">Remove</button>
            </div>
            <div class="record-fields">
                <div class="field-group">
                    <label>Subdomain:</label>
                    <div class="subdomain-input-wrapper">
                        <input type="text" class="record-subdomain" placeholder="subdomain or @ for root" required>
                        <span class="domain-suffix"></span>
                    </div>
                </div>
                <div class="field-group">
                    <label>Type:</label>
                    <select class="record-type">
                        <option value="A">A (IPv4)</option>
                        <option value="AAAA">AAAA (IPv6)</option>
                        <option value="CNAME">CNAME</option>
                        <option value="MX">MX</option>
                        <option value="TXT">TXT</option>
                        <option value="SRV">SRV</option>
                    </select>
                </div>
                <div class="field-group">
                    <label>
                        <input type="checkbox" class="record-proxied" checked>
                        Proxied through Cloudflare
                    </label>
                </div>
            </div>
        </div>
    </template>

    <script src="renderer.js"></script>
</body>
</html>